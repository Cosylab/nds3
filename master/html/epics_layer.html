<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>NDS3: NDS3 and EPICS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NDS3
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">API reference manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('epics_layer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NDS3 and EPICS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The command epicsNdsControlSystem is an IOC application that is linked again the NDS framwork and provides the NDS functionalities.</p>
<p>After epicsNdsControlSystem has been launched then the classic EPICS IOC shell will appear: the shell will be able to parse and execute the additional NDS3 commands which will allow to load and run generic NDS3 devices into EPICS.</p>
<h1><a class="anchor" id="epics_getting_started"></a>
Getting started</h1>
<p>When the EPICS shell appears then you can load one or more NDS3 devices into the shell by using the command <a class="el" href="epics_layer.html#epics_commands_ndsloaddriver">ndsLoadDriver</a>.</p>
<p>When the desidered drivers have been loaded then you can instantiate one or more devices by using the command <a class="el" href="epics_layer.html#epics_commands_ndscreatedevice">ndsCreateDevice</a>.</p>
<p>The following example loads the so module acquisitionDevice which provide the driver "AcquisitionDevice", then creates 2 acquisition devices named device0 and device1: </p>
<pre class="fragment">$&gt;epicsNdsControlSystem
epics&gt; ndsLoadDriver /usr/bin/acquistionDevice.so
epics&gt; ndsCreateDevice AcquisitionDevice device0
epics&gt; ndsCreateDevice AcquisitionDevice device1
epics&gt; iocInit
</pre><p>You can list the PVs supplied by the 2 devices by issuing the dbl command.</p>
<p>Each device node or PV may provide additional commands that can be executed by using the NDS command <a class="el" href="epics_layer.html#epics_commands_nds">nds</a>.</p>
<p>For instance, to switch on a node connected to a state machine: </p>
<pre class="fragment">epics&gt; nds switchOn device0
epics&gt; nds switchOn device0-channel0
epics&gt; nds start device0-channel0
</pre><h1><a class="anchor" id="epics_commands"></a>
Commands</h1>
<p>This section describes the additional IOCSH commands provided by the NDS framework.</p>
<h2><a class="anchor" id="epics_commands_ndsloaddriver"></a>
ndsLoadDriver</h2>
<p>Usage: ndsLoadDriver pathToSoModule</p>
<p>Parameters:</p>
<ul>
<li><b>pathToSoModule</b> is a path to a shared library that implements an NDS device.</li>
</ul>
<p>The command loads the shared library in memory and checks that it provides the NDS functionalities. If the loaded module does not export the NDS functions then an error message is displayed.</p>
<p>The device provided by the loaded module can be instantiated with the command <a class="el" href="epics_layer.html#epics_commands_ndscreatedevice">ndsCreateDevice</a>.</p>
<h2><a class="anchor" id="epics_commands_ndscreatedevice"></a>
ndsCreateDevice</h2>
<p>usage: ndsLoadDriver driverName rootNodeName [parameter0 [parameter1 [parameter2[ parameter3...]]]]</p>
<p>Parameters:</p>
<ul>
<li><b>driverName</b> the name of the driver. This is not the shared module name, but the name provided by the shared module's exported function getDeviceName(), which is set by the macro <a class="el" href="definitions_8h.html#abae220b9d7ab927324ef6caa20107576">NDS_DEFINE_DRIVER</a>.</li>
<li><b>rootNodeName</b> the parameter to pass as root node name to the device constructor</li>
<li><b>parameterX</b> one or more parameters in the form name=value and passed as named parameters to the device's constructor. Their meaning is device-dependent.</li>
</ul>
<h2><a class="anchor" id="epics_commands_ndsloadnamingrules"></a>
ndsLoadNamingRules</h2>
<p>usage: ndsLoadNamingRules pathToNamingRules</p>
<p>Parameters:</p>
<ul>
<li><b>pathToNamingRules</b> the path to the INI file containing the naming rules. See <a class="el" href="naming_rules.html#naming_rules_file">Naming rules definition file</a>.</li>
</ul>
<p>If the loaded file contains only one set of rules (just one section) then the rules are enabled immediately, otherwise the command <a class="el" href="epics_layer.html#epics_commands_ndsenablenamingrules">ndsEnableNamingRules</a> must be used to enable one of the rules section.</p>
<p>The file must be loaded before creating the device with <a class="el" href="epics_layer.html#epics_commands_ndscreatedevice">ndsCreateDevice</a>.</p>
<h2><a class="anchor" id="epics_commands_ndsenablenamingrules"></a>
ndsEnableNamingRules</h2>
<p>usage: ndsEnableNamingRulessss rulesSection</p>
<p>Parameters:</p>
<ul>
<li><b>rulesSection</b> The section in the INI file that contains the naming rules to enable</li>
</ul>
<p>The command activates the naming rules described in a particular section of a <a class="el" href="naming_rules.html#naming_rules_file">Naming rules definition file</a>.</p>
<p>The rules must be activated before creating the device with <a class="el" href="epics_layer.html#epics_commands_ndscreatedevice">ndsCreateDevice</a>.</p>
<h2><a class="anchor" id="epics_commands_nds"></a>
nds</h2>
<p>usage: nds nodeCommand nodeName [parameters]</p>
<p>Parameters:</p>
<ul>
<li><b>nodeCommand</b> the custom command registered by the node or PV</li>
<li><b>nodeName</b> the name of the node for which the command is being called. Can be the internal or external full node name</li>
</ul>
<p>The command nds enable the execution of custom commands registered by individual nodes that form the device. Each node can register its own set of commands, but once a command has been registered by a node then the same command registered by other node must accept the same number of parameters as the first registered one.</p>
<p>See <a class="el" href="classnds_1_1_base.html#abde6158c710255cee600d935229e9f00" title="Define a command specific for the node. ">nds::Base::defineCommand()</a> for more information about the registration of custom commands.</p>
<h3><a class="anchor" id="epics_commands_nds_switchon"></a>
nds switchOn</h3>
<p>usage: nds switchOn nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node that has to be switched on. Can be the internal or external full node name</li>
</ul>
<p>This command is automatically provided for all the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> nodes and all the <a class="el" href="classnds_1_1_node.html" title="A node object that can contain other nodes or PVs as children. ">Node</a> objects that have a child <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a>.</p>
<p>It causes the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> to execute the transition to the <a class="el" href="namespacends.html#a5ad0010c1a8c5890f6fb996f72a34c81aed2b5c0139cec8ad2873829dc1117d50" title="The device is switched on. ">state_t::on</a> state.</p>
<h3><a class="anchor" id="epics_commands_nds_switchoff"></a>
nds switchOff</h3>
<p>usage: nds switchOff nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node that has to be switched off. Can be the internal or external full node name</li>
</ul>
<p>This command is automatically provided for all the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> nodes and all the <a class="el" href="classnds_1_1_node.html" title="A node object that can contain other nodes or PVs as children. ">Node</a> objects that have a child <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a>.</p>
<p>It causes the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> to execute the transition to the <a class="el" href="namespacends.html#a5ad0010c1a8c5890f6fb996f72a34c81a3262d48df5d75e3452f0f16b313b7808" title="The device is switched off. ">state_t::off</a> state.</p>
<h3><a class="anchor" id="epics_commands_nds_switchstart"></a>
nds start</h3>
<p>usage: nds start nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node that has to be started. Can be the internal or external full node name</li>
</ul>
<p>This command is automatically provided for all the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> nodes and all the <a class="el" href="classnds_1_1_node.html" title="A node object that can contain other nodes or PVs as children. ">Node</a> objects that have a child <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a>.</p>
<p>It causes the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> to execute the transition to the <a class="el" href="namespacends.html#a5ad0010c1a8c5890f6fb996f72a34c81a75101dcdfc88455bcafc9e53e0b06689" title="The device is operating. ">state_t::running</a> state.</p>
<h3><a class="anchor" id="epics_commands_nds_switchstop"></a>
nds stop</h3>
<p>usage: nds stop nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node that has to be stopped. Can be the internal or external full node name</li>
</ul>
<p>This command is automatically provided for all the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> nodes and all the <a class="el" href="classnds_1_1_node.html" title="A node object that can contain other nodes or PVs as children. ">Node</a> objects that have a child <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a>.</p>
<p>It causes the <a class="el" href="classnds_1_1_state_machine.html" title="Represents a state machine to be attached to a node. ">StateMachine</a> to execute the transition to the <a class="el" href="namespacends.html#a5ad0010c1a8c5890f6fb996f72a34c81aed2b5c0139cec8ad2873829dc1117d50" title="The device is switched on. ">state_t::on</a> state.</p>
<h3><a class="anchor" id="epics_commands_nds_setlogleveldebug"></a>
nds setLogLevelDebug</h3>
<p>usage: nds setLogLevelDebug nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node for which the log level has to be set to debug</li>
</ul>
<p>This command is automatically provided for all the nodes and PVs (all the <a class="el" href="classnds_1_1_base.html" title="This is the base class for all the NDS3 public classes that declare a device part (node...">Base</a> derived objects).</p>
<p>It enables the debug log level for the node and its children or for the PV.</p>
<h3><a class="anchor" id="epics_commands_nds_setloglevelinfo"></a>
nds setLogLevelInfo</h3>
<p>usage: nds setLogLevelInfo nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node for which the log level has to be set to info</li>
</ul>
<p>This command is automatically provided for all the nodes and PVs (all the <a class="el" href="classnds_1_1_base.html" title="This is the base class for all the NDS3 public classes that declare a device part (node...">Base</a> derived objects).</p>
<p>It enables the info debug level for the node and its children or for the PV.</p>
<h3><a class="anchor" id="epics_commands_nds_setloglevelwarning"></a>
nds setLogLevelWarning</h3>
<p>usage: nds setLogLevelWarning nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node for which the log level has to be set to warning</li>
</ul>
<p>This command is automatically provided for all the nodes and PVs (all the <a class="el" href="classnds_1_1_base.html" title="This is the base class for all the NDS3 public classes that declare a device part (node...">Base</a> derived objects).</p>
<p>It enables the warning log level for the node and its children or for the PV.</p>
<h3><a class="anchor" id="epics_commands_nds_setloglevelerror"></a>
nds setLogLevelError</h3>
<p>usage: nds setLogLevelError nodeName</p>
<p>Parameters:</p>
<ul>
<li><b>nodeName</b> the node for which the log level has to be set to error</li>
</ul>
<p>This command is automatically provided for all the nodes and PVs (all the <a class="el" href="classnds_1_1_base.html" title="This is the base class for all the NDS3 public classes that declare a device part (node...">Base</a> derived objects).</p>
<p>It enables the error log level for the node and its children or for the PV.</p>
<h3><a class="anchor" id="epics_commands_nds_subscribe"></a>
nds subscribe</h3>
<p>usage: nds subscribe destinationPVName sourcePVName</p>
<p>Parameters:</p>
<ul>
<li><b>destinationPVName</b> the output PV to which all the data generated by the input PV sourceNodeName must be sent</li>
<li><b>sourcePVName</b> the input PV from which all the generated data must be passed to destinationPVName</li>
</ul>
<p>This command connects the inputPV sourcePVName to the output PV destinationPVName: all the data pushed to the inputPV via <a class="el" href="group__datareadwrite.html#ga2115bb8973e7b227ffd93a99c7c148fe" title="Pushes a value to the control system. ">PVBaseIn::push()</a> or <a class="el" href="group__datareadwrite.html#ga15abfe47827969620c19fb03e30e3469" title="Set the variable&#39;s value. ">PVVariableIn::setValue()</a> will be written into the output PV via <a class="el" href="group__datareadwrite.html#gadbc88dc19f57f56f1504fb6f1588a121" title="Call to write the value into the PV. ">PVBaseOut::write()</a>.</p>
<p>The input and output PVs may be part of different NDS devices but must be running into the same process (must be created via <a class="el" href="epics_layer.html#epics_commands_ndscreatedevice">ndsCreateDevice</a> in the same IOCSH).</p>
<h3><a class="anchor" id="epics_commands_nds_replicate"></a>
nds replicate</h3>
<p>usage: nds replicate destinationPVName sourcePVName</p>
<p>Parameters:</p>
<ul>
<li><b>destinationPVName</b> the input PV that will push the same data pushed to the input PV sourceNodeName</li>
<li><b>sourcePVName</b> the input PV from which all pushed data will be also pushed to the input PV destinationPVName</li>
</ul>
<p>This command causes the input PV destinationPVName to replicate all the push operations performed by the input PV sourcePVName.</p>
<p>This command is useful to replicate the results of calculations performed by a NDS device into another NDS device that wants to expose the calculations as its own.</p>
<h3><a class="anchor" id="epics_commands_nds_decimation"></a>
nds decimation</h3>
<p>usage: nds decimation inputPVName decimationFactor</p>
<p>Parameters:</p>
<ul>
<li><b>inputPVName</b> the input PV on which the decimation factor must be changed</li>
<li><b>sourcePVName</b> the new decimation factor</li>
</ul>
<p>The decimation factor is the ratio of the data pushed to the PV via <a class="el" href="group__datareadwrite.html#ga2115bb8973e7b227ffd93a99c7c148fe" title="Pushes a value to the control system. ">PVBaseIn::push()</a> versus the data actually pushed to the control system.</p>
<dl class="section warning"><dt>Warning</dt><dd>it is not safe to issue this command while the PV is being used for pushing data. The command should be used BEFORE or AFTER the pushing operations on the PV ave been performer. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jun 3 2018 22:22:51 for NDS3 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
